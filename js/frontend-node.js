const io = require('socket.io-client');

const socket = io.connect('http://localhost:8005');

var countDownDate = new Date("March 29, 2018 12:30:00").getTime();

socket.on('connect', function(data) { console.log('connected to server'); });
socket.on('disconnect', function(data) { console.log('disconnected from server'); });

socket.on('timer', function(timestamp) {
    let now = timestamp;

    // Find the distance between now an the count down date
    let distance = countDownDate - now;

    // Time calculations for days, hours, minutes and seconds
    let days = Math.floor(distance / (1000 * 60 * 60 * 24));
    let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    let seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Display the result in an element with id="demo"
    document.getElementById("countdown").innerHTML = days + "d " + hours + "h "
        + minutes + "m " + seconds + "s ";

    // If the count down is finished, write some text
    if (distance < 0) {
        document.getElementById("demo").innerHTML = "IT IS HERE";
    }
});

// Emits a 'subscribeToTimer' request, which server.js intercepts
socket.emit('subscribeToTimer', 1000);

//================================================================================
/* added_content.txt for frontend-node.js goes here */
//================================================================================
